{"version":3,"sources":["webpack:///./src/views/Experiment.vue?2ccd","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./src/views/Experiment.vue?a398","webpack:///src/views/Experiment.vue","webpack:///./src/views/Experiment.vue?6f24","webpack:///./src/views/Experiment.vue?7dee"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","on","toggle","_v","_s","icon","currentTimeISO","staticStyle","ref","zoomTwo","centerTwo","$event","staticRenderFns","name","data","zoomOne","centerOne","syncFlag","currentTime","animationId","computed","buttonLabel","watch","val","$refs","mapTwo","setView","viewOne","viewTwo","created","parser","DOMParser","setTime","methods","play","stop","window","setInterval","clearInterval","component","VBtn","VIcon"],"mappings":"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","file":"js/chunk-77776594.1615639c.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Experiment.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Experiment.vue?vue&type=style&index=0&lang=css&\"","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"controls\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.toggle}},[_c('v-icon',[_vm._v(_vm._s(_vm.icon))])],1),_c('br'),_vm._v(\" Time: \"+_vm._s(_vm.currentTimeISO)+\" \")],1),_c('div',{staticClass:\"columns\",staticStyle:{\"border\":\"red\"}},[_c('div',{staticClass:\"column\"},[_c('vl-map',{ref:\"mapTwo\",attrs:{\"data-projection\":\"EPSG:4326\"}},[_c('vl-view',{ref:\"viewTwo\",attrs:{\"zoom\":_vm.zoomTwo,\"center\":_vm.centerTwo},on:{\"update:zoom\":function($event){_vm.zoomTwo=$event},\"update:center\":function($event){_vm.centerTwo=$event}}}),_c('vl-layer-tile',[_c('vl-source-osm')],1),_c('vl-layer-image',[_c('vl-source-image-wms',{attrs:{\"url\":\"https://geo.weather.gc.ca/geomet\",\"layers\":\"RADAR_1KM_RSNO\",\"server-type\":\"mapserver\",\"time\":_vm.currentTimeISO}})],1)],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"app\">\r\n    <div class=\"controls\">\r\n      <v-btn icon @click=\"toggle\"><v-icon>{{icon}}</v-icon></v-btn>\r\n      <br>\r\n      Time: {{ currentTimeISO }}\r\n    </div>\r\n    <div class=\"columns\" style=\"border: red\">\r\n      <div class=\"column\">\r\n        <vl-map \r\n          ref=\"mapTwo\" \r\n          data-projection=\"EPSG:4326\">\r\n          <vl-view \r\n            ref=\"viewTwo\" \r\n            :zoom.sync=\"zoomTwo\" \r\n            :center.sync=\"centerTwo\"/>\r\n\r\n          <vl-layer-tile>\r\n            <vl-source-osm></vl-source-osm>\r\n          </vl-layer-tile>\r\n\r\n          <vl-layer-image>\r\n            <vl-source-image-wms\r\n              url=\"https://geo.weather.gc.ca/geomet\"\r\n              layers=\"RADAR_1KM_RSNO\"\r\n              server-type=\"mapserver\"\r\n              :time=\"currentTimeISO\"\r\n            />\r\n          </vl-layer-image>\r\n        </vl-map>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"app\",\r\n  data() {\r\n    return {\r\n      zoomOne: 3,\r\n      centerOne: [-70, 70],\r\n      zoomTwo: 3,\r\n      centerTwo: [-100, 45],\r\n      syncFlag: false,\r\n      currentTime: null,\r\n      animationId: null,\r\n      icon: 'play_arrow'\r\n    };\r\n  },\r\n  computed: {\r\n    currentTimeISO() {\r\n      return this.currentTime\r\n        ? this.currentTime.toISOString().split(\".\")[0] + \"Z\"\r\n        : null;\r\n    },\r\n    buttonLabel() {\r\n      return this.animationId ? \"Stop\" : \"Play\";\r\n    }\r\n  },\r\n  watch: {\r\n    syncFlag(val) {\r\n      if (val) {\r\n        this.$refs.mapTwo.setView(this.$refs.viewOne);\r\n      } else {\r\n        this.$refs.mapTwo.setView(this.$refs.viewTwo);\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.parser = new DOMParser();\r\n    this.setTime();\r\n  },\r\n  methods: {\r\n    async getRadarStartEndTime() {\r\n      let response = await fetch(\r\n        \"https://geo.weather.gc.ca/geomet/?lang=en&service=WMS&request=GetCapabilities&version=1.3.0&LAYERS=RADAR_1KM_RSNO\"\r\n      );\r\n      let data = await response.text().then(data =>\r\n        this.parser\r\n          .parseFromString(data, \"text/xml\")\r\n          .getElementsByTagName(\"Dimension\")[0]\r\n          .innerHTML.split(\"/\")\r\n      );\r\n      return [new Date(data[0]), new Date(data[1])];\r\n    },\r\n    async setTime() {\r\n      const data = await this.getRadarStartEndTime();\r\n      if (this.currentTime === null) {\r\n        this.currentTime = data[0];\r\n      } else if (this.currentTime >= data[1]) {\r\n        this.currentTime = data[0];\r\n      } else {\r\n        this.currentTime = new Date(\r\n          this.currentTime.setMinutes(this.currentTime.getMinutes() + 10)\r\n        );\r\n      }\r\n    },\r\n    play() {\r\n      this.stop();\r\n      this.animationId = window.setInterval(this.setTime, 1000 / 5);\r\n    },\r\n    stop() {\r\n      if (this.animationId !== null) {\r\n        clearInterval(this.animationId);\r\n        this.animationId = null;\r\n      }\r\n    },\r\n    toggle() {\r\n      if (this.animationId) {\r\n        this.icon = 'play_arrow';\r\n        this.stop();\r\n      } else {\r\n        this.icon = 'pause';\r\n        this.play();\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\nhtml,\r\nbody {\r\n  width: 100%;\r\n  height: 100%;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n#app {\r\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.columns {\r\n  display: flex;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.columns .column {\r\n  flex: 1 1 auto;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Experiment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Experiment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Experiment.vue?vue&type=template&id=6a46ba97&\"\nimport script from \"./Experiment.vue?vue&type=script&lang=js&\"\nexport * from \"./Experiment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Experiment.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VIcon})\n"],"sourceRoot":""}