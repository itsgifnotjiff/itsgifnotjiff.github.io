(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77776594"],{"04ad":function(e,t,n){"use strict";var r=n("2fb1"),i=n.n(r);i.a},"1da1":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d3b7"),n("e6cf");function r(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,c,"next",e)}function c(e){r(o,i,a,s,c,"throw",e)}s(void 0)}))}}},"2fb1":function(e,t,n){},3613:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"controls"},[n("v-btn",{attrs:{icon:""},on:{click:e.toggle}},[n("v-icon",[e._v(e._s(e.icon))])],1),n("br"),e._v(" Time: "+e._s(e.currentTimeISO)+" ")],1),n("div",{staticClass:"columns",staticStyle:{border:"red"}},[n("div",{staticClass:"column"},[n("vl-map",{ref:"mapTwo",attrs:{"data-projection":"EPSG:4326"}},[n("vl-view",{ref:"viewTwo",attrs:{zoom:e.zoomTwo,center:e.centerTwo},on:{"update:zoom":function(t){e.zoomTwo=t},"update:center":function(t){e.centerTwo=t}}}),n("vl-layer-tile",[n("vl-source-osm")],1),n("vl-layer-image",[n("vl-source-image-wms",{attrs:{url:"https://geo.weather.gc.ca/geomet",layers:"RADAR_1KM_RSNO","server-type":"mapserver",time:e.currentTimeISO}})],1)],1)],1)])])},i=[],a=(n("d3b7"),n("ac1f"),n("1276"),n("96cf"),n("1da1")),o={name:"app",data:function(){return{zoomOne:3,centerOne:[-70,70],zoomTwo:3,centerTwo:[-100,45],syncFlag:!1,currentTime:null,animationId:null,icon:"play_arrow"}},computed:{currentTimeISO:function(){return this.currentTime?this.currentTime.toISOString().split(".")[0]+"Z":null},buttonLabel:function(){return this.animationId?"Stop":"Play"}},watch:{syncFlag:function(e){e?this.$refs.mapTwo.setView(this.$refs.viewOne):this.$refs.mapTwo.setView(this.$refs.viewTwo)}},created:function(){this.parser=new DOMParser,this.setTime()},methods:{getRadarStartEndTime:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://geo.weather.gc.ca/geomet/?lang=en&service=WMS&request=GetCapabilities&version=1.3.0&LAYERS=RADAR_1KM_RSNO");case 2:return n=t.sent,t.next=5,n.text().then((function(t){return e.parser.parseFromString(t,"text/xml").getElementsByTagName("Dimension")[0].innerHTML.split("/")}));case 5:return r=t.sent,t.abrupt("return",[new Date(r[0]),new Date(r[1])]);case 7:case"end":return t.stop()}}),t)})))()},setTime:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getRadarStartEndTime();case 2:n=t.sent,null===e.currentTime||e.currentTime>=n[1]?e.currentTime=n[0]:e.currentTime=new Date(e.currentTime.setMinutes(e.currentTime.getMinutes()+10));case 4:case"end":return t.stop()}}),t)})))()},play:function(){this.stop(),this.animationId=window.setInterval(this.setTime,200)},stop:function(){null!==this.animationId&&(clearInterval(this.animationId),this.animationId=null)},toggle:function(){this.animationId?(this.icon="play_arrow",this.stop()):(this.icon="pause",this.play())}}},s=o,c=(n("04ad"),n("2877")),u=n("6544"),l=n.n(u),m=n("8336"),p=n("132d"),f=Object(c["a"])(s,r,i,!1,null,null,null);t["default"]=f.exports;l()(f,{VBtn:m["a"],VIcon:p["a"]})}}]);
//# sourceMappingURL=chunk-77776594.1615639c.js.map